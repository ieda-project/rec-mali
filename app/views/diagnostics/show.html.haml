= partial 'children/profile'

%h2.em= partial 'header', locals: { diagnostic: @diagnostic }

%section.resume
  - if @diagnostic.failed_classifications.try :any?
    %section.warning
      %h3 Les classifications suivante on échoués:
      %ul
        - for c in Classification.find(@diagnostic.failed_classifications) do
          %li= c.name

  - for i in Illness.order(:sequence) do
    %section.consultation
      %h2.consultation= i.name
      %table
        - for sa in @diagnostic.sign_answers.for(i).sort do
          %tr
            %th(scope="row")!= sa.sign.question
            %td!= sa.html_value rescue sa.value
      - cs = @diagnostic.classifications.for(i)
      %ul.classification
        - for c in cs do
          %li= c.name
