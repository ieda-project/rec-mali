%nav
  %p.hint Le patient se présente au dispensaire pour la première fois ?
  = link_to 'Nouveau patient', new_child_path, :class => 'new-child'

%section
  %h1 Rechercher un patient
  - search_form do |f|
    %div
      %label Nom
      = f.text_field :name
    %div
      %label Date de naissance
      = f.select :born_on, (0..20).to_a.map {|y| [Date.today.year - y]*2}, :include_blank => 'Indifférent', :selected => ((params[:q] ? params[:q][:born_on] : nil) || Date.today.year - 8).to_i
    .village
      %label Village
      = f.select :village_id, Village.to_select, include_blank: true
    .buttons
      -#%button(type='reset') Clear
      %button(type='submit') Rechercher

  - if @children.any?
    %p.result-count
      %strong= @children.size
      Patient(s) trouvé(s)
    %table.children
      %thead
        %tr
          %th Nom
          %th Date de naissance
          %th Village
          %th Dernière visite
      %tbody
        - for child in @children.includes(:village).paginate(page, window: 15) do
          %tr{ :class => cycle("odd", "even") }
            %td= link_to child.name, child
            %td= l child.born_on
            %td= child.village.name
            %td= child.last_visit_at
    -#%ul.pagination
      %li.em= link_to "< Prev", "#"
      %li 1
      %li= link_to "2", "#"
      %li ...
      %li= link_to "3", "#"
      %li.em= link_to "Next >", "#"
  - else
    .no-result
      %p Aucun patient ne correspond aux termes de recherche spécifiés 
      %p 
        %strong Suggestions : 
        Vérifiez l’orthographe des termes de recherche ou consultez la
        = link_to "liste des patients", children_path
