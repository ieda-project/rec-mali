$version 2

##################################
## Infection bactérienne locale ##
##################################

@infection_bac_grave = inf_bac.convulsions OR inf_bac.alimentation OR inf_bac.freq_resp >= 60 OR inf_bac.tirage OR inf_bac.geignement OR enfant.temp >= 38 OR enfant.temp < 35.5 OR inf_bac.mouvements != de_lui_meme
@infection_bac_locale = (inf_bac.ombilic OR inf_bac.pustules) AND !@infection_bac_grave

inf_bac|Maladie grave|high|@infection_bac_grave
inf_bac|Infection bactérienne locale|medium|@infection_bac_locale
inf_bac|Pas d'infection bactérienne|low|!@infection_bac_grave AND !@infection_bac_locale

##############
## Diarrhée ##
##############

@signes_deshy_severe = AT_LEAST_TWO_OF(inf_bac.mouvements != de_lui_meme, diarrhee.yeux_enfonces, diarrhee.pli_cutane == tres_lentement)
@signes_deshy_evident = AT_LEAST_TWO_OF(diarrhee.agite, diarrhee.yeux_enfonces, diarrhee.pli_cutane == lentement)

diarrhee|Déshydratation sévère|high|diarrhee.diarrhee_presence AND @signes_deshy_severe
diarrhee|Signes évidents de déshydratation|medium|diarrhee.diarrhee_presence AND @signes_deshy_evident AND !@signes_deshy_severe
diarrhee|Pas de déshydratation|low|diarrhee.diarrhee_presence AND !@signes_deshy_evident AND !@signes_deshy_severe








# @incapable_nourir = alimentation.qa OR (alimentation.qb AND ((alimentation.qf == pas_prise) OR (alimentation.qg == pas_succion)))
# @signes_pb_alim = (alimentation.qb AND ((alimentation.qf == mauvaise_prise) OR (alimentation.qg == non_efficace) OR (alimentation.qc < 12))) OR alimentation.qd OR alimentation.qh OR ((enfant.weight < 2.5) AND (enfant.weight >= 1.5))
#
# alimentation|Incapable de se nourrir / possibilité d’une infection bactérienne grave|high|@incapable_nourir
# alimentation|Problème d’alimentation et/ou poids faible pour l’âge|medium|!@incapable_nourir AND @signes_pb_alim
# alimentation|Pas de poids faible et/ou pas de problème d’alimentation|low|!@incapable_nourir AND !@signes_pb_alim
#
#
#
#
# @au_moins_deux_signes_vih = AT_LEAST_TWO_OF(vih.qa, vih.qb, vih.qc, vih.qd, vih.qe, diarrhee.qa AND (diarrhee.qb >= 14), vih.qf, vih.qg, vih.qh, (enfant.weight < 1.5), alimentation.qh, vih.qi, vih.qk)
#
# @pas_signes_vih = !vih.qa AND !vih.qb AND !vih.qc AND !vih.qd AND !vih.qe AND !(diarrhee.qa AND (diarrhee.qb >= 14)) AND !vih.qf AND !vih.qg AND !vih.qh AND !(enfant.weight < 1.5) AND !alimentation.qh AND !vih.qi AND !vih.qk
#
# vih|Infection VIH symptomatique très probable|high|REMOVED
# vih|Infection VIH symptomatique confirmée|medium|(vih.qj == positive) AND (vih.ql == positive) AND @au_moins_deux_signes_vih
# vih|Infection VIH asymptomatique confirmée|medium|(vih.qj == positive) AND (vih.ql == positive) AND @pas_signes_vih
# vih|Infection VIH symptomatique possible|medium|(vih.qj == inconnue) AND @au_moins_deux_signes_vih
# vih|Infection VIH peu problable|low|(vih.qj == negative) AND @au_moins_deux_signes_vih AND (vih.ql != negative)
# vih|Pas d'infection VIH|low|(vih.qj == negative) AND (vih.ql == negative)