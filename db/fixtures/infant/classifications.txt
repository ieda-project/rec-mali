$version 7

@infection_bac_grave = inf_bac.qa OR (inf_bac.freq_resp >= 60) OR inf_bac.qc OR inf_bac.qd OR inf_bac.qe OR inf_bac.qf OR inf_bac.qg OR (inf_bac.qh AND inf_bac.qi) OR (inf_bac.qj != normale) OR (inf_bac.qk == nombreuses_severes) OR (inf_bac.ql == lethargique_inconscient) OR inf_bac.qm


@infection_bac_locale = !@infection_bac_grave AND (inf_bac.qh OR (inf_bac.qk == presentes))

inf_bac|Possibilité d'infection bactérienne grave|high|@infection_bac_grave
inf_bac|Infection bactérienne locale|medium|@infection_bac_locale
inf_bac|Pas d'infection bactérienne|low|!@infection_bac_grave AND !@infection_bac_locale



@signes_deshy_severe = AT_LEAST_TWO_OF(inf_bac.ql == lethargique_inconscient, diarrhee.qd, diarrhee.qe == tres_lentement)
@signes_deshy_evident = AT_LEAST_TWO_OF(inf_bac.ql == agite_irritable, diarrhee.qd, diarrhee.qe == lentement)

diarrhee|Pas de diarrhée|low|!diarrhee.qa
diarrhee|Déshydratation sévère|high|diarrhee.qa AND @signes_deshy_severe
diarrhee|Signes évidents de déshydratation|medium|diarrhee.qa AND !@signes_deshy_severe AND @signes_deshy_evident
diarrhee|Pas de déshydratation|low|diarrhee.qa AND !@signes_deshy_severe AND !@signes_deshy_evident
diarrhee|Diarrhée persistante grave|high|diarrhee.qa AND (diarrhee.qb >= 14)
diarrhee|Sang dans les selles|high|diarrhee.qa AND diarrhee.qc




@incapable_nourir = alimentation.qa OR (alimentation.qb AND ((alimentation.qf == pas_prise) OR (alimentation.qg == pas_succion)))
@signes_pb_alim = (alimentation.qb AND ((alimentation.qf == mauvaise_prise) OR (alimentation.qg == non_efficace) OR (alimentation.qc < 12))) OR alimentation.qd OR alimentation.qh OR ((enfant.weight < 2.5) AND (enfant.weight >= 1.5))

alimentation|Incapable de se nourrir / possibilité d’une infection bactérienne grave|high|@incapable_nourir
alimentation|Problème d’alimentation et/ou poids faible pour l’âge|medium|!@incapable_nourir AND @signes_pb_alim
alimentation|Pas de poids faible et/ou pas de problème d’alimentation|low|!@incapable_nourir AND !@signes_pb_alim




@au_moins_deux_signes_vih = AT_LEAST_TWO_OF(vih.qa, vih.qb, vih.qc, vih.qd, vih.qe, diarrhee.qa AND (diarrhee.qb >= 14), vih.qf, vih.qg, vih.qh, (enfant.weight < 1.5), alimentation.qh, vih.qi, vih.qk)

@pas_signes_vih = !vih.qa AND !vih.qb AND !vih.qc AND !vih.qd AND !vih.qe AND !(diarrhee.qa AND (diarrhee.qb >= 14)) AND !vih.qf AND !vih.qg AND !vih.qh AND !(enfant.weight < 1.5) AND !alimentation.qh AND !vih.qi AND !vih.qk

vih|Infection VIH symptomatique très probable|high|REMOVED
vih|Infection VIH symptomatique confirmée|medium|(vih.qj == positive) AND (vih.ql == positive) AND @au_moins_deux_signes_vih
vih|Infection VIH asymptomatique confirmée|medium|(vih.qj == positive) AND (vih.ql == positive) AND @pas_signes_vih
vih|Infection VIH symptomatique possible|medium|(vih.qj == inconnue) AND @au_moins_deux_signes_vih
vih|Infection VIH peu problable|low|(vih.qj == negative) AND @au_moins_deux_signes_vih AND (vih.ql != negative)
vih|Pas d'infection VIH|low|(vih.qj == negative) AND (vih.ql == negative)